<h2>Vehículos disponibles</h2>

<!-- =========================
     PANEL ADMIN (solo admin)
     ========================= -->
<div class="admin-panel" *ngIf="esAdmin">
  <div class="admin-head">
    <div>
      <h3>{{ modoEdicion ? 'Editar vehículo' : 'Añadir nuevo vehículo' }}</h3>
      <p class="muted">
        Completa los datos y pulsa <strong>{{ modoEdicion ? 'Guardar cambios' : 'Crear vehículo' }}</strong>.
      </p>
    </div>

    <button type="button" class="btn btn-ghost" (click)="nuevoVehiculo()">
      Nuevo
    </button>
  </div>

  <div class="admin-form">
    <div class="field">
      <label>Marca</label>
      <input type="text" [(ngModel)]="form.marca" placeholder="Ej: Seat" />
    </div>

    <div class="field">
      <label>Modelo</label>
      <input type="text" [(ngModel)]="form.modelo" placeholder="Ej: Ibiza" />
    </div>

    <div class="field">
      <label>Precio (€)</label>
      <input type="number" [(ngModel)]="form.precio" min="0" placeholder="11900" />
    </div>

    <div class="field">
      <label>Categoría</label>
      <input type="text" [(ngModel)]="form.categoria" placeholder="Ej: Compacto / SUV / Motocicletas" />
    </div>

    <div class="field field-wide">
      <label>URL de imagen</label>
      <input type="text" [(ngModel)]="form.imagen" placeholder="https://..." />
    </div>

    <div class="field actions">
      <button type="button" class="btn btn-primary" (click)="guardarVehiculo()">
        {{ modoEdicion ? 'Guardar cambios' : 'Crear vehículo' }}
      </button>

      <span class="chip" *ngIf="modoEdicion && editId">
        Editando: {{ editId }}
      </span>
    </div>
  </div>
</div>

<!-- =========================
     GRID VEHÍCULOS
     ========================= -->
<div class="grid">
  <div class="card" *ngFor="let v of vehiculosFiltrados">

    <img [src]="v.imagen" alt="Vehículo" />

    <div class="info">
      <h3>{{ v.marca }} {{ v.modelo }}</h3>
      <p class="precio">{{ v.precio }} €</p>
      <p class="categoria">{{ v.categoria }}</p>
    </div>

    <!-- Añadir al carrito (moderno) -->
    <button class="btn btn-cart" type="button" (click)="addToCart(v)">
      Añadir al carrito
    </button>

    <!-- Acciones admin -->
    <div class="admin-actions" *ngIf="esAdmin">
      <button class="btn btn-edit" type="button" (click)="editarVehiculo(v)">
        Editar
      </button>
      <button class="btn btn-del" type="button" (click)="eliminarVehiculo(v._id!)">
        Eliminar
      </button>
    </div>

  </div>
</div>